<!DOCTYPE html>
<html lang="en">
<head>
    <title>Rock Paper Scissors</title>
</head>
<body>
<p>Rock Paper Scissors</p>
<button onclick="
      playGame('tosh');
    ">Tosh</button>

<button onclick="
      playGame('qog\'oz');
    ">Qog'oz</button>

<button onclick="
      playGame('qaychi');
    ">qaychi</button>

<p class="js-result"></p>
<p class="js-moves"></p>
<p class="js-score"></p>

<button onclick="
      score.wins = 0;
      score.losses = 0;
      score.ties = 0;
      localStorage.removeItem('score');
      updateScoreElement();
    ">Reset Score</button>

<script>
    let hisob = JSON.parse(localStorage.getItem('hisob')) || {
        wins: 0,
        losses: 0,
        ties: 0
    };

    updateScoreElement();

    /*
    if (!hisob) {
      hisob = {
        wins: 0,
        losses: 0,
        ties: 0
      };
    }
    */

    function playGame(playerMove) {
        const computerMove = pickComputerMove();

        let result = '';

        if (playerMove === 'qaychi') {
            if (computerMove === 'tosh') {
                result = 'Yutqazdingiz.';
            } else if (computerMove === 'qog\'oz') {
                result = 'G\'alaba qozondingiz.';
            } else if (computerMove === 'qaychi') {
                result = 'Teng.';
            }

        } else if (playerMove === 'qog\'oz') {
            if (computerMove === 'tosh') {
                result = 'G\'alaba qozondingiz.';
            } else if (computerMove === 'qog\'oz') {
                result = 'Teng.';
            } else if (computerMove === 'qaychi') {
                result = 'Yutqazdingiz.';
            }

        } else if (playerMove === 'tosh') {
            if (computerMove === 'tosh') {
                result = 'Teng.';
            } else if (computerMove === 'qog\'oz') {
                result = 'Yutqazdingiz.';
            } else if (computerMove === 'qaychi') {
                result = 'G\'alaba qozondingiz.';
            }
        }

        if (result === 'G\'alaba qozondingiz.') {
            hisob.wins += 1;
        } else if (result === 'Yutqazdingiz.') {
            hisob.losses += 1;
        } else if (result === 'Teng.') {
            hisob.ties += 1;
        }

        localStorage.setItem('score', JSON.stringify(hisob));

        updateScoreElement();

        document.querySelector('.js-result').innerHTML = result;

        document.querySelector('.js-moves').innerHTML = `You ${playerMove} - ${computerMove} Computer`;
    }

    function updateScoreElement() {
        document.querySelector('.js-score')
            .innerHTML = `Wins: ${hisob.wins}, Losses: ${hisob.losses}, Ties: ${hisob.ties}`;
    }

    function pickComputerMove() {
        const randomNumber = Math.random();

        let computerMove = '';

        if (randomNumber >= 0 && randomNumber < 1 / 3) {
            computerMove = 'tosh';
        } else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3) {
            computerMove = 'qog\'oz';
        } else if (randomNumber >= 2 / 3 && randomNumber < 1) {
            computerMove = 'qaychi';
        }

        return computerMove;
    }
</script>
</body>
</html>
